{"version":3,"sources":["resources/drag-handle.svg","resources/root-tree.svg","resources/logo.svg","i18n/index.js","i18n/en_gb.js","utils/index.js","components/I18n.js","actions/messages.js","utils/defaultBackendErrorHandler.js","actions/auth.js","actions/settings.js","actions/dbobjects.js","actions/tags.js","actions/childrenLoaded.js","actions/tasks.js","utils/tasks.js","components/TaskHeader.js","components/NewTaskForm.js","Config.js","components/hoc/FormState.js","components/EditTaskNotes.js","components/TaskNotes.js","components/TaskTag.js","components/TaskTagList.js","components/TaskDetails.js","actions/modals.js","components/Modal.js","components/DeleteTaskModal.js","components/EditTagsModal.js","components/SettingWrapper.js","utils/connectSetting.js","components/DropdownSetting.js","components/TextSetting.js","utils/settings.js","components/SettingsModal.js","utils/modals.js","components/EditTaskTitle.js","components/TaskMainInfo.js","components/TagMenuTagList.js","components/TaskTagMenu.js","components/Task.js","components/TaskList.js","components/App.js","components/LoginForm.js","components/RegisterForm.js","components/HomePage.js","components/UserHeader.js","components/Header.js","components/Message.js","components/Messages.js","components/ModalContainer.js","components/Layout.js","utils/Backend.js","reducers/auth.js","reducers/childrenLoaded.js","reducers/dbobjects.js","reducers/messages.js","reducers/modals.js","reducers/settings.js","reducers/index.js","utils/requireAuth.js","components/Root.js","index.js"],"names":["module","exports","__webpack_require__","p","languages","en_gb","_LANGUAGE","APPLY_TAG","CLICK_TO_DISMISS","COLLAPSE_CHILDREN","COLLAPSE_DETAILS","DELETE_CHILDREN","DELETE_MODAL","DELETE_MODAL_SHORTCUT_HINT","DELETE_TASK","DONE_EDITING","EDIT_TASK","EDIT_TAGS","EMAIL","EXPAND_CHILDREN","EXPAND_DETAILS","HELLO_USER","LIME","LOADING","LOG_IN_BUTTON","LOG_IN_HEADER","MARK_COMPLETED","MARK_UNCOMPLETED","MESSAGE_TOKEN_EXPIRED","MOVE_CHILDREN","MOVE_TASK","NAME","NEW_TASK","NO_TAGS_FOUND","NO_TASKS_YET","NOTES","PASSWORD","REGISTER_BUTTON","REGISTER_HEADER","REMOVE_TAG","ROOT_HERE","SEARCH_TAGS","SETTING_SAVED","SETTINGS","i18n","language","key","args","mapped","undefined","str","replace","RegExp","formatStr","maybeReplaceProp","props","propName","argsPropName","thing","String","I18n","_this$props","this","Component","component","Object","objectWithoutProperties","childRef","ref","dispatch","react_default","a","createElement","React","defaultProps","connect","state","settings","logoutAction","createReducer","initialState","clearOnLogout","reducerMap","arguments","length","action","type","reducer","payload","createConstants","prefix","constants","reduce","acc","constant","createUuid4","fourHexits","Math","floor","random","toString","substring","objectArrayToObject","objs","val","object_id","filterObject","obj","copy","assign","_len","keysToRemove","Array","_key","i","toggleState","setState","prevState","defineProperty","handleChange","field","event","target","value","withTitle","Icon","style","verticalAlign","width","height","components_I18n","displayName","withArgs","func","_len2","_key2","apply","loadSVG","src","callback","onClick","element","onclick","react_svg","className","preventParentScroll","onwheel","deltaY","scrollTop","scrollHeight","offsetHeight","preventDefault","stopPropagation","MessageActions","MessageActionCreators","addMessageFromRequestError","error","message","statusCode","response","addMessage","level","ADD_MESSAGE","clearMessage","id","CLEAR_MESSAGE","defaultBackendErrorHandler","extraActions","AuthActionCreators","logout","map","AuthActions","login","email","password","redirect","getState","loginRequest","auth","backend","requestNoAuth","token","loginSuccess","push","authFailure","LOGIN_REQUEST","localStorage","setItem","JSON","stringify","LOGIN_SUCCESS","register","name","registerRequest","registerSuccess","REGISTER_REQUEST","REGISTER_SUCCESS","FAILURE","clear","isAuthenticated","LOGOUT","SettingActions","SettingActionCreators","getSettings","request","gotSettings","GOT_SETTINGS","setSetting","markSaved","setSetting_","SET_SETTING","DbObjectActions","DbObjectActionCreators","identifier","object_ids","DELETE","FILTER","objects","LOAD","MAP","TagActionCreators","getTagsAndGroups","addTagGroup","title","clearForm","groups","addTag","group_id","mutated","applyTagToTasks","tag_id","task_ids","hideMenu","removeTagFromTasks","deleteTagGroup","tag_group","tag","group_tag_ids","Set","tag_ids","task","new_tag_ids","filter","has","deleteTag","includes","ChildrenLoadedActions","ChildrenLoadedActionCreators","parent_id","LOADED","parent_ids","TaskActionCreators","getTasks","tasks","getTask","task_id","addTask","deleteTask","cascade","tasksToDelete","tasksByID","parents","isChild","parentSet","taskToObject","newParents","values","size","maybeCascadeDelete","updateTask","fields","reorderTask","after_id","before_id","reparentTask","TaskHeader","actions","taskID","prevProps","react_router_dom_es","to","md","bindActionCreators","NewTaskForm","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","e","parentID","bind","taskInput","focus","_this2","connectDropTarget","isOver","focusInput","placeholder","input","onChange","onKeyPress","maybeSubmit","DropTarget","canDrop","monitor","getItem","lastTaskID","drop","didDrop","dropTarget","shallow","Config","savedTimeout","messageTimeout","dragExpandChildrenTimeout","apiHost","FormState","saved","saveChanges","clearTimeout","setTimeout","saveValue","EditTaskNotes","onBlur","propTypes","PropTypes","number","isRequired","notes","TaskNotes","react_markdown_default","source","skipHtml","TaskTag","RemoveTag","MdClose","editMode","removeTag","TaskTagList","tags","components_TaskTag","TaskDetails","components_EditTaskNotes","TaskNotes_TaskNotes","components_TaskTagList","ModalActions","ModalActionCreators","showModal","modal","SHOW_MODAL","closeTopModal","CLOSE_TOP","closeAllModals","CLOSE_ALL","Modal","dontClose","hasPrevious","closeTop","closeAll","children","modals","DeleteTaskModal","taskActions","modalActions","components_Modal","reparentChildren","deleteChildren","EditTagsModal","tagActions","SettingWrapper","settingType","htmlFor","setting","label","mapStateToProps","mapDispatchToProps","connectSetting","DropdownSetting","SettingWrapper_SettingWrapper","fieldType","options","option","string","array","TextSetting","SettingTypes","SettingComponents","_SettingComponents","DROPDOWN","components_TextSetting","TEXT","Settings","entries","_ref","_ref2","slicedToArray","createSetting","SettingsModal","_React$Component","inherits","createClass","Modals","edit_tags","ModalComponents","_ModalComponents","EditTaskTitle","autoFocus","TaskMainInfo","has_children","ctrlKey","deletionBehaviour","shiftKey","completed","classes","ApplyTag","MdLabel","CollapseDetails","MdExpandLess","DeleteTask","Done","MdDone","DragHandle","dragHandle","Edit","MdEdit","ExpandChildren","MdList","ExpandDetails","MdExpandMore","RootHere","rootTree","TaskCompleted","MdCheckBox","TaskUnCompleted","MdCheckBoxOutlineBlank","handle","connectDragSource","connectDragPreview","join","markAsUncompleted","markAsCompleted","components_EditTaskTitle","allowedTypes","unwrapDisallowed","linkTarget","detailsShown","toggleDetails","toggleEditMode","toggleTagMenu","goTo","toggleExpandChildren","childrenExpanded","deletion_behaviour","TagMenuTagList","tagID","tagToLi","applyTag","concat","group","matchesSearch","text","toLowerCase","searchText","tag_groups","find","TaskTagMenu","searchInput","components_TagMenuTagList","Task","expandChildren","expandChildrenForDragging","dragTimeout","showDetails","isOverSelfOnly","isDragging","mainInfoProps","showTagMenu","taskDetailsProps","components_TaskMainInfo","TaskDetails_TaskDetails","TaskTagMenu_TaskTagMenu","components_TaskList","alternateDepth","DragSource","beginDrag","dragSource","dragPreview","TaskList","childrenLoaded","components_Task","components_NewTaskForm","orderedTasks","child","App","parseInt","match","params","settingActions","components_TaskHeader","DragDropContext","HTML5Backend","LoginForm","next","disabled","isAuthenticating","RegisterForm","HomePage","queryString","parse","location","search","components_LoginForm","components_RegisterForm","UserHeader","authActions","contentI18nArgs","Header","logo","alt","Link","components_UserHeader","icons","warning","info","success","Message","disappear","Messages","TransitionGroup_default","messages","CSSTransition_default","classNames","timeout","components_Message","ModalContainer","in","slice","Layout","modalOpen","components_ModalContainer","Header_Header","components_Messages","withRouter","Backend","endpoint","data","onSuccess","onError","err","Error","fetch","method","mode","headers","Accept","Content-Type","body","then","status","json","TypeError","statusText","auth_createReducer","childrenLoaded_createReducer","toConsumableArray","dbObjectReducer","_createReducer","object","__identifier","messages_createReducer","modals_createReducer","settings_createReducer","combineReducers","routing","routerReducer","requireAuth","AuthenticatedComponent","checkAuth","redirectAfterLogin","pathname","Root","history","createHistory","store","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","routerMiddleware","parsed","jwt","decode","complete","exp","Date","now","es","react_router_redux_es","components_Layout","exact","path","ReactDOM","render","Root_Root","document","getElementById"],"mappings":"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","file":"static/js/main.bd8617b4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/drag-handle.5d691e22.svg\";","module.exports = __webpack_public_path__ + \"static/media/root-tree.2a27d43a.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.7d479a54.svg\";","import {formatStr} from '../utils';\nimport en_gb from './en_gb';\n\nexport const languages = {\n  'en_gb': en_gb\n};\n\nexport default function i18n(language, key, args) {\n  var mapped = (languages[language || 'en_gb'] || {})[key];\n\n  if (mapped === undefined) return key;\n\n  return formatStr(mapped, args);\n}\n","export default {\n  '_LANGUAGE': 'British English',\n  'APPLY_TAG': 'Apply tag',\n  'CLICK_TO_DISMISS': 'Click to dismiss...',\n  'COLLAPSE_CHILDREN': 'Collapse children',\n  'COLLAPSE_DETAILS': 'Collapse task detail',\n  'DELETE_CHILDREN': 'Delete Children',\n  'DELETE_MODAL': 'You are trying to delete a task which has children. You can either move the children to the parent task, or delete all of the children as well.',\n  'DELETE_MODAL_SHORTCUT_HINT': 'P.S. To skip this dialog in future, hold ctrl while pressing the delete button to move the children to the parent, or hold shift to delete the children.',\n  'DELETE_TASK': 'Delete task',\n  'DONE_EDITING': 'Done editing',\n  'EDIT_TASK': 'Edit task',\n  'EDIT_TAGS': 'Edit tags',\n  'EMAIL': 'Email',\n  'EXPAND_CHILDREN': 'Expand children',\n  'EXPAND_DETAILS': 'Expand task detail',\n  'HELLO_USER': 'Hello, {name}',\n  'LIME': 'LiME',\n  'LOADING': 'Loading...',\n  'LOG_IN_BUTTON': 'Log in',\n  'LOG_IN_HEADER': 'Log in...',\n  'MARK_COMPLETED': 'Mark task completed',\n  'MARK_UNCOMPLETED': 'Mark task uncompleted',\n  'MESSAGE_TOKEN_EXPIRED': 'Your session has expired; please log in again',\n  'MOVE_CHILDREN': 'Move Children',\n  'MOVE_TASK': 'Click and drag here to move task',\n  'NAME': 'Name',\n  'NEW_TASK': 'New Task...',\n  'NO_TAGS_FOUND': 'No matching tags found',\n  'NO_TASKS_YET': 'No tasks here yet. Add one below...',\n  'NOTES': 'Notes (supports Markdown)',\n  'PASSWORD': 'Password',\n  'REGISTER_BUTTON': 'Register',\n  'REGISTER_HEADER': 'Register...',\n  'REMOVE_TAG': 'Remove tag',\n  'ROOT_HERE': 'Root task list here',\n  'SEARCH_TAGS': 'Search tags...',\n  'SETTING_SAVED': '✓ Saved!',\n  'SETTINGS': 'Settings',\n};\n","import I18n from '../components/I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactSVG from 'react-svg';\n\nexport const logoutAction = '__LOGOUT';\n\nexport function createReducer(initialState, clearOnLogout, reducerMap) {\n  return (state = initialState, action) => {\n    if (action.type === logoutAction) {\n      return clearOnLogout ? initialState : state;\n    }\n\n    const reducer = reducerMap[action.type];\n\n    return reducer\n      ? reducer(state, action.payload)\n      : state;\n  };\n}\n\nexport function createConstants(prefix, constants) {\n  return constants.reduce((acc, constant) => {\n    acc[constant] = prefix + constant;\n    return acc;\n  }, {});\n}\n\nexport function createUuid4() {\n  var fourHexits =\n      () => Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n  return (\n    fourHexits() + fourHexits() + '-' +\n    fourHexits() + '-' +\n    fourHexits() + '-' +\n    fourHexits() + '-' +\n    fourHexits() + fourHexits() + fourHexits()\n  );\n}\n\nexport function objectArrayToObject(objs) {\n  return objs.reduce((acc, val) => {\n    acc[val.object_id] = val;\n    return acc;\n  }, {});\n}\n\nexport function filterObject(obj, ...keysToRemove) {\n  var copy = Object.assign({}, obj);\n  for (var i = keysToRemove.length - 1; i >= 0; i--) {\n    delete copy[keysToRemove[i]];\n  }\n  return copy;\n}\n\nexport function formatStr(str, args) {\n  for (var key in args) {\n    str = str.replace(new RegExp('\\\\{' + key + '\\\\}', 'gi'), args[key]);\n  }\n  return str;\n}\n\nexport function toggleState(key) {\n  return function() {\n    this.setState((prevState) => {\n      return {[key]: !prevState[key]};\n    });\n  };\n}\n\nexport function forceState(key, value) {\n  return function() {\n    this.setState({[key]: value});\n  };\n}\n\nexport function handleChange(field) {\n  return function(event) {\n    this.setState({[field]: event.target.value});\n  };\n}\n\nexport function withTitle(Icon) {\n  var style = {\n    verticalAlign: 'initial',\n    width: '100%',\n    height: '100%',\n  };\n  var component = props => (\n    <I18n component='span' {...props}>\n      <Icon style={style} />\n    </I18n>\n  );\n  component.displayName = 'withTitle(' + Icon.displayName + ')';\n  return component;\n}\n\nexport function withArgs(func, ...args) {\n  return function() {\n    func(...args);\n  };\n}\n\nexport function loadSVG(src) {\n  var component = function(props) {\n    var callback = null;\n    if (props.onClick !== undefined) {\n      callback = function(element) {\n        element.onclick = props.onClick;\n      };\n    }\n    return (\n      <ReactSVG src={src} callback={callback} className='reactSVG' {...props} />\n    );\n  };\n  component.displayName = 'SVG(' + src + ')';\n  component.propTypes = {\n    onClick: PropTypes.func,\n  };\n  return component;\n}\n\nexport function preventParentScroll(target) {\n  if (target === null) return;\n\n  target.onwheel = function(event) {\n    if (\n      (event.deltaY < 0 && target.scrollTop === 0) ||\n      (event.deltaY > 0 && target.scrollTop === (target.scrollHeight - target.offsetHeight))\n    ) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  };\n}\n","import {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../i18n';\n\nfunction isString(thing) {\n  return (typeof thing === 'string' || thing instanceof String);\n}\n\nfunction maybeReplaceProp(language, props, propName, argsPropName) {\n  argsPropName = argsPropName || propName + 'I18nArgs';\n  if (isString(props[propName])) {\n    props[propName] = i18n(\n      language,\n      props[propName],\n      props[argsPropName] || {}\n    );\n  }\n  delete props[argsPropName];\n}\n\nclass I18n extends React.Component {\n  render() {\n    const {component: Component, language, ...props} = this.props;\n\n    maybeReplaceProp(language, props, 'children', 'contentI18nArgs');\n    maybeReplaceProp(language, props, 'placeholder');\n    maybeReplaceProp(language, props, 'title');\n\n    if (props.childRef !== undefined) {\n      props.ref = props.childRef;\n      delete props.childRef;\n    }\n\n    delete props.dispatch;\n\n    return (\n      <Component {...props} />\n    );\n  }\n}\nI18n.propTypes = {\n  component: PropTypes.any,\n  language: PropTypes.string,\n};\nI18n.defaultProps = {\n  component: 'span',\n};\n\nfunction mapStateToProps(state) {\n  return {\n    language: state.settings.language,\n  };\n}\n\nexport default connect(mapStateToProps)(I18n);\n","import {createConstants} from '../utils';\n\nexport const MessageActions = createConstants('MESSAGE_ACTION_', [\n  'ADD_MESSAGE',\n  'CLEAR_MESSAGE',\n  'LOGOUT'\n]);\n\nexport const MessageActionCreators = {\n  addMessageFromRequestError: function(error) {\n    var message = error.message;\n    if (error.statusCode !== null) {\n      message = error.statusCode + ' - ' + message;\n    }\n    if (error.response.error !== undefined) {\n      message += ': ' + error.response.error;\n    }\n    return MessageActionCreators.addMessage('error', message);\n  },\n  addMessage: function(level, message) {\n    return {\n      type: MessageActions.ADD_MESSAGE,\n      payload: {level, message}\n    };\n  },\n  clearMessage: function(id) {\n    return {\n      type: MessageActions.CLEAR_MESSAGE,\n      payload: {id}\n    };\n  }\n};\n","import {AuthActionCreators} from '../actions/auth';\nimport {MessageActionCreators} from '../actions/messages';\n\nexport default function defaultBackendErrorHandler(dispatch, ...extraActions) {\n  return function(error) {\n    dispatch(MessageActionCreators.addMessageFromRequestError(error));\n    if (error.statusCode === 401) {\n      dispatch(AuthActionCreators.logout());\n    }\n    extraActions.map((action) => dispatch(action));\n  };\n}\n","import {MessageActions} from './messages';\nimport {createConstants, logoutAction} from '../utils';\nimport {push} from 'react-router-redux';\nimport defaultBackendErrorHandler from '../utils/defaultBackendErrorHandler';\n\nexport const AuthActions = createConstants('AUTH_ACTION_', [\n  'LOGIN_REQUEST',\n  'LOGIN_SUCCESS',\n  'REGISTER_REQUEST',\n  'REGISTER_SUCCESS',\n  'FAILURE',\n]);\n\nexport const AuthActionCreators = {\n  login: function(email, password, redirect='/') {\n    return function(dispatch, getState) {\n      dispatch(AuthActionCreators.loginRequest());\n      return getState().auth.backend.requestNoAuth(\n        'login', {email, password},\n        function(token) {\n          dispatch(AuthActionCreators.loginSuccess(token));\n          dispatch(push(redirect));\n        },\n        defaultBackendErrorHandler(dispatch, AuthActionCreators.authFailure())\n      );\n    };\n  },\n  loginRequest: function() {\n    return {type: AuthActions.LOGIN_REQUEST};\n  },\n  loginSuccess: function(token) {\n    localStorage.setItem('token', JSON.stringify(token));\n    return {\n      type: AuthActions.LOGIN_SUCCESS,\n      payload: {token}\n    };\n  },\n  register: function(email, password, name, redirect='/') {\n    return function(dispatch, getState) {\n      dispatch(AuthActionCreators.registerRequest());\n      return getState().auth.backend.requestNoAuth(\n        'register', {email, password, name},\n        function(token) {\n          dispatch(AuthActionCreators.registerSuccess(token));\n          dispatch(push(redirect));\n        },\n        defaultBackendErrorHandler(dispatch, AuthActionCreators.authFailure())\n      );\n    };\n  },\n  registerRequest: function() {\n    return {type: AuthActions.REGISTER_REQUEST};\n  },\n  registerSuccess: function(token) {\n    localStorage.setItem('token', JSON.stringify(token));\n    return {\n      type: AuthActions.REGISTER_SUCCESS,\n      payload: {token}\n    };\n  },\n  authFailure: function() {\n    return {\n      type: AuthActions.FAILURE\n    };\n  },\n  logout: function() {\n    return function(dispatch, getState) {\n      localStorage.clear('token');\n\n      // Common logout action which restores many state partitions to their\n      // initial state.\n      dispatch({type: logoutAction});\n\n      if (getState().auth.backend.isAuthenticated()) {\n        dispatch({type: MessageActions.LOGOUT});\n      }\n    };\n  }\n};\n","import {createConstants} from '../utils';\nimport defaultBackendErrorHandler from '../utils/defaultBackendErrorHandler';\n\nexport const SettingActions = createConstants('SETTING_ACTION_', [\n  'GOT_SETTINGS',\n  'SET_SETTING'\n]);\n\nexport const SettingActionCreators = {\n  getSettings: function() {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'get_settings', {},\n        function(settings) {\n          dispatch(SettingActionCreators.gotSettings(settings));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  gotSettings: function(settings) {\n    return {\n      type: SettingActions.GOT_SETTINGS,\n      payload: {settings}\n    };\n  },\n  setSetting: function(key, value, markSaved) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'set_setting', {key, value},\n        function() {\n          dispatch(SettingActionCreators.setSetting_(key, value));\n          if (typeof(markSaved) === 'function') {\n            markSaved();\n          }\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  setSetting_: function(key, value) {\n    return {\n      type: SettingActions.SET_SETTING,\n      payload: {key, value}\n    };\n  },\n};\n","import {createConstants} from '../utils';\n\nexport const DbObjectActions = createConstants('DB_OBJECT_ACTION_', [\n  'DELETE',\n  'FILTER',\n  'LOAD',\n  'MAP',\n]);\n\nexport const DbObjectActionCreators = {\n  delete: function(identifier, object_ids) {\n    return {\n      type: DbObjectActions.DELETE,\n      payload: {identifier, object_ids},\n    };\n  },\n  filter: function(identifier, func) {\n    return {\n      type: DbObjectActions.FILTER,\n      payload: {identifier, func},\n    };\n  },\n  load: function(objects) {\n    return {\n      type: DbObjectActions.LOAD,\n      payload: {objects},\n    };\n  },\n  map: function(identifier, func) {\n    return {\n      type: DbObjectActions.MAP,\n      payload: {identifier, func},\n    };\n  },\n};\n","import {DbObjectActionCreators} from './dbobjects';\nimport defaultBackendErrorHandler from '../utils/defaultBackendErrorHandler';\n\nexport const TagActionCreators = {\n  getTagsAndGroups: function() {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'get_tags_and_groups', {},\n        function(response) {\n          dispatch(DbObjectActionCreators.load(response));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  addTagGroup: function(title, clearForm) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'add_tag_group', {title},\n        function(groups) {\n          dispatch(\n            DbObjectActionCreators.load(groups));\n          clearForm();\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  addTag: function(title, group_id, clearForm) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'add_tag', {title, group_id},\n        function(mutated) {\n          dispatch(\n            DbObjectActionCreators.load(mutated));\n          clearForm();\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  applyTagToTasks: function(tag_id, task_ids, hideMenu) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'apply_tag_to_tasks', {tag_id, task_ids},\n        function(mutated) {\n          dispatch(\n            DbObjectActionCreators.load(mutated));\n          hideMenu();\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  removeTagFromTasks: function(tag_id, task_ids) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'remove_tag_from_tasks', {tag_id, task_ids},\n        function(mutated) {\n          dispatch(DbObjectActionCreators.load(mutated));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  deleteTagGroup: function(tag_group) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'delete_tag_group', {group_id: tag_group.object_id},\n        function() {\n          dispatch(DbObjectActionCreators.delete(\n            'TagGroup', [tag_group.object_id]));\n          dispatch(DbObjectActionCreators.filter(\n            'Tag', (tag) => tag.group_id !== tag_group.object_id));\n          let group_tag_ids = new Set(tag_group.tag_ids);\n          dispatch(DbObjectActionCreators.map(\n            'Task', (task) => {\n              let new_tag_ids = task.tag_ids.filter(id => !group_tag_ids.has(id));\n              if (new_tag_ids.length === task.tag_ids.length) return task;\n              return Object.assign({}, task, {tag_ids: new_tag_ids});\n            }));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  deleteTag: function(tag_id) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'delete_tag', {tag_id},\n        function() {\n          dispatch(DbObjectActionCreators.delete(\n            'Tag', [tag_id]));\n          dispatch(DbObjectActionCreators.map(\n            'Task', (task) => {\n              if (!task.tag_ids.includes(tag_id)) return task;\n              return Object.assign(\n                {}, task, {tag_ids: task.tag_ids.filter(id => id !== tag_id)});\n            }));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n};\n","import {createConstants} from '../utils';\n\nexport const ChildrenLoadedActions = createConstants('CHILDREN_LOADED_ACTION_', [\n  'LOADED',\n  'DELETE',\n]);\n\nexport const ChildrenLoadedActionCreators = {\n  loaded: function(parent_id) {\n    return {\n      type: ChildrenLoadedActions.LOADED,\n      payload: {parent_id},\n    };\n  },\n  delete: function(parent_ids) {\n    return {\n      type: ChildrenLoadedActions.DELETE,\n      payload: {parent_ids},\n    };\n  },\n};\n","import {ChildrenLoadedActionCreators} from './childrenLoaded';\nimport {DbObjectActionCreators} from './dbobjects';\nimport {maybeCascadeDelete} from '../utils/tasks';\nimport defaultBackendErrorHandler from '../utils/defaultBackendErrorHandler';\n\nexport const TaskActionCreators = {\n  getTasks: function(parent_id) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'get_tasks', {parent_id},\n        function(tasks) {\n          dispatch(DbObjectActionCreators.load(tasks));\n          dispatch(ChildrenLoadedActionCreators.loaded(parent_id));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  getTask: function(task_id) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'get_task', {task_id},\n        function(tasks) {\n          dispatch(DbObjectActionCreators.load(tasks));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  addTask: function(parent_id, title, clearForm) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'add_task', {parent_id, title},\n        function(tasks) {\n          dispatch(DbObjectActionCreators.load(tasks));\n          clearForm();\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  deleteTask: function(task, cascade=false) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'delete_task', {task_id: task.object_id, cascade},\n        function(tasks) {\n          var tasksToDelete = maybeCascadeDelete(getState().tasks, task.object_id, cascade);\n\n          dispatch(DbObjectActionCreators.delete('Task', tasksToDelete));\n          dispatch(ChildrenLoadedActionCreators.delete(tasksToDelete));\n          dispatch(DbObjectActionCreators.load(tasks));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  updateTask: function(task_id, fields, markSaved) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'update_task', Object.assign({task_id}, fields),\n        function(tasks) {\n          dispatch(DbObjectActionCreators.load(tasks));\n          if (typeof(markSaved) === 'function') {\n            markSaved();\n          }\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  reorderTask: function(task_id, after_id=null, before_id=null) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'reorder_task', {task_id, after_id, before_id},\n        function(tasks) {\n          dispatch(DbObjectActionCreators.load(tasks));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n  reparentTask: function(task_id, parent_id) {\n    return function(dispatch, getState) {\n      return getState().auth.backend.request(\n        'reparent_task', {task_id, parent_id},\n        function(tasks) {\n          dispatch(DbObjectActionCreators.load(tasks));\n        },\n        defaultBackendErrorHandler(dispatch));\n    };\n  },\n};\n","export function maybeCascadeDelete(tasksByID, task_id, cascade) {\n  var parents = new Set([task_id]);\n  if (!cascade) return parents;\n  function isChild(parentSet) {\n    return task => parentSet.has(task.parent_id) || parentSet.has(task.object_id);\n  }\n  var taskToObject = task => task.object_id;\n  var newParents = new Set(Object.values(tasksByID).filter(isChild(parents)).map(taskToObject));\n  while (newParents.size > parents.size) {\n    parents = newParents;\n    newParents = new Set(Object.values(tasksByID).filter(isChild(parents)).map(taskToObject));\n  }\n  return newParents;\n}\n","import '../css/TaskHeader.css';\nimport {Link} from 'react-router-dom';\nimport {MdFileUpload} from 'react-icons/md';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass TaskHeader extends React.Component {\n  componentDidMount() {\n    if (this.props.task === undefined) {\n      this.props.actions.getTask(this.props.taskID);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.taskID !== this.props.taskID && this.props.task === undefined) {\n      this.props.actions.getTask(this.props.taskID);\n    }\n  }\n\n  render() {\n    if (this.props.task === undefined) {\n      return null;\n    }\n    return (\n      <div className='TaskHeader'>\n        <Link to={\n          this.props.task.parent_id === null\n            ? '/'\n            : '/parent/' + this.props.task.parent_id\n        }>\n          <MdFileUpload className=\"goUp\" />\n        </Link>\n        <h2>{this.props.task.title}</h2>\n      </div>\n    );\n  }\n}\nTaskHeader.propTypes = {\n  actions: PropTypes.object.isRequired,\n  task: PropTypes.object,\n  taskID: PropTypes.number.isRequired,\n};\n\nfunction mapStateToProps(state, props) {\n  return {\n    task: state.tasks[props.taskID],\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(TaskActionCreators, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskHeader);\n","import '../css/NewTaskForm.css';\nimport {DropTarget} from 'react-dnd';\nimport {MdAddBox} from 'react-icons/md';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {handleChange} from '../utils';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass NewTaskForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: '',\n    };\n  }\n\n  clearForm() {\n    this.setState({title: ''});\n  }\n\n  maybeSubmit(e) {\n    if (e && e.key === 'Enter') {\n      e.preventDefault();\n      this.props.actions.addTask(this.props.parentID, this.state.title, this.clearForm.bind(this));\n    }\n  }\n\n  focusInput() {\n    this.taskInput.focus();\n  }\n\n  render() {\n    return this.props.connectDropTarget(\n      <div className={this.props.isOver ? 'NewTaskForm isOver' : 'NewTaskForm'}>\n        <MdAddBox className='addTaskIcon' onClick={this.focusInput.bind(this)} />\n        <form>\n          <I18n\n            component='input'\n            type='text'\n            placeholder='NEW_TASK'\n            value={this.state.title}\n            childRef={(input) => { this.taskInput = input; }}\n            onChange={handleChange('title').bind(this)}\n            onKeyPress={this.maybeSubmit.bind(this)} />\n        </form>\n      </div>\n    );\n  }\n}\nNewTaskForm.propTypes = {\n  actions: PropTypes.object.isRequired,\n  connectDropTarget: PropTypes.func.isRequired,\n  parentID: PropTypes.number,\n  lastTaskID: PropTypes.number,\n  isOver: PropTypes.bool.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(TaskActionCreators, dispatch)\n  };\n}\n\nconst dropTarget = {\n  canDrop(props, monitor) {\n    return (monitor.getItem().task_id !== props.lastTaskID);\n  },\n\n  drop(props, monitor) {\n    if (monitor.didDrop()) return;\n\n    if (props.lastTaskID === null) {\n      props.actions.reparentTask(\n        monitor.getItem().task_id,\n        props.parentID);\n    } else {\n      props.actions.reorderTask(\n        monitor.getItem().task_id,\n        null,\n        props.lastTaskID);\n    }\n  },\n};\n\nfunction dropCollect(connect, monitor) {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver({shallow: true}) && monitor.canDrop(),\n  };\n}\n\nexport default (\n  connect(null, mapDispatchToProps)(\n    DropTarget('TASK', dropTarget, dropCollect)(\n      NewTaskForm)));\n","// Config values for the app.\n\nvar Config = {\n  savedTimeout: 2500,\n  messageTimeout: 5000,\n  dragExpandChildrenTimeout: 1000,\n};\n\n/* global process */\n/* eslint no-process-env: \"off\" */\n/* This is the one place where we use process.env */\nif (process.env.NODE_ENV === 'production') {\n  Config = Object.assign({}, Config, {\n    apiHost: 'https://limeapi.fivebit.co.uk/'\n  });\n} else {\n  Config = Object.assign({}, Config, {\n    apiHost: 'http://localhost:5000/'\n  });\n}\n\nexport default Config;\n","import Config from '../../Config';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nexport default class FormState extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      saved: false,\n      value: props.value,\n      savedTimeout: null,\n    };\n  }\n\n  handleChange() {\n    return function(event) {\n      this.setState({\n        saved: false,\n        value: event.target.value,\n      });\n    };\n  }\n\n  componentWillUnmount() {\n    this.saveChanges();\n\n    // Avoid calling setState after unmount;\n    if (this.state.savedTimeout !== null) {\n      clearTimeout(this.state.savedTimeout);\n    }\n  }\n\n  markSaved() {\n    if (this.state.savedTimeout !== null) {\n      clearTimeout(this.state.savedTimeout);\n    }\n\n    this.setState({\n      saved: true,\n      savedTimeout: setTimeout(\n        () => this.setState({saved: false}),\n        Config.savedTimeout)\n    });\n  }\n\n  saveChanges() {\n    if (this.state.value === this.props.value) return;\n    this.props.saveValue(this.state.value, this.markSaved.bind(this));\n  }\n}\nFormState.propTypes = {\n  saveValue: PropTypes.func.isRequired,\n  value: PropTypes.any.isRequired,\n};\n","import '../css/EditTaskNotes.css';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {preventParentScroll} from '../utils';\nimport FormState from './hoc/FormState';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass EditTaskNotes extends FormState {\n  render() {\n    return (\n      <div className={this.state.saved ? 'EditTaskNotes saved' : 'EditTaskNotes'}>\n        <I18n\n          component='textarea'\n          childRef={preventParentScroll}\n          value={this.state.value}\n          onChange={this.handleChange().bind(this)}\n          onBlur={this.saveChanges.bind(this)}\n          placeholder='NOTES' />\n      </div>\n    );\n  }\n}\nEditTaskNotes.propTypes = {\n  task_id: PropTypes.number.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch, props) {\n  var updateTask = bindActionCreators(TaskActionCreators.updateTask, dispatch);\n  return {\n    saveValue: function(value, markSaved) {\n      updateTask(props.task_id, {notes: value}, markSaved);\n    }\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(EditTaskNotes);\n","import '../css/TaskNotes.css';\nimport {preventParentScroll} from '../utils';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nexport default class TaskNotes extends React.Component {\n  render() {\n    return (\n      <div className='TaskNotes' ref={preventParentScroll}>\n        <ReactMarkdown source={this.props.task.notes} skipHtml={true} />\n      </div>\n    );\n  }\n}\nTaskNotes.propTypes = {\n  task: PropTypes.object.isRequired,\n};\n","import '../css/TaskTag.css';\nimport {MdClose} from 'react-icons/md';\nimport {TagActionCreators} from '../actions/tags';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {withTitle} from '../utils';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass TaskTag extends React.Component {\n  removeTag() {\n    this.props.actions.removeTagFromTasks(\n      this.props.tag.object_id, [this.props.task_id]);\n  }\n\n  render() {\n    var RemoveTag = withTitle(MdClose);\n    return (\n      <li className='TaskTag'>\n        {this.props.tag.title}\n        {\n          this.props.editMode\n            ? <RemoveTag\n              className='removeTag'\n              onClick={this.removeTag.bind(this)}\n              title='REMOVE_TAG' />\n            : null\n        }\n      </li>\n    );\n  }\n}\nTaskTag.propTypes = {\n  actions: PropTypes.object.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  task_id: PropTypes.number.isRequired,\n  tag: PropTypes.object.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(TagActionCreators, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(TaskTag);\n","import '../css/TaskTagList.css';\nimport {connect} from 'react-redux';\nimport {preventParentScroll} from '../utils';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TaskTag from './TaskTag';\n\nclass TaskTagList extends React.Component {\n  render() {\n    let task_id = this.props.task.object_id;\n    let tags = this.props.tags.map(\n      tag => {\n        return tag !== undefined\n          ? <TaskTag\n            tag={tag}\n            task_id={task_id}\n            key={task_id + '-' + tag.object_id}\n            editMode={this.props.editMode} />\n          : null;});\n\n    return <ul className='TaskTagList' ref={preventParentScroll}>{tags}</ul>;\n  }\n}\nTaskTagList.propTypes = {\n  editMode: PropTypes.bool.isRequired,\n  tags: PropTypes.array.isRequired,\n  task: PropTypes.object.isRequired,\n};\n\nfunction mapStateToProps(state, props) {\n  return {\n    tags: props.task.tag_ids.map(tag_id => state.tags[tag_id]),\n  };\n}\n\nexport default connect(mapStateToProps, null)(TaskTagList);\n","import '../css/TaskDetails.css';\nimport EditTaskNotes from './EditTaskNotes';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TaskNotes from './TaskNotes';\nimport TaskTagList from './TaskTagList';\n\nexport default class TaskDetails extends React.Component {\n  render() {\n    return (\n      <div className='TaskDetails'>\n        <div className='notesWrapper'>\n          {\n            this.props.editMode\n              ? <EditTaskNotes task_id={this.props.task.object_id} value={this.props.task.notes} />\n              : <TaskNotes task={this.props.task} />\n          }\n        </div>\n        <TaskTagList task={this.props.task} editMode={this.props.editMode} />\n        <div className=\"clearfix\"></div>\n      </div>\n    );\n  }\n}\nTaskDetails.propTypes = {\n  editMode: PropTypes.bool.isRequired,\n  task: PropTypes.object.isRequired,\n};\n","import {createConstants} from '../utils';\n\nexport const ModalActions = createConstants('MODAL_ACTION_', [\n  'SHOW_MODAL',\n  'CLOSE_TOP',\n  'CLOSE_ALL',\n]);\n\nexport const ModalActionCreators = {\n  showModal: function(modal, props) {\n    return {\n      type: ModalActions.SHOW_MODAL,\n      payload: {modal, props}\n    };\n  },\n  closeTopModal: function() {\n    return {type: ModalActions.CLOSE_TOP};\n  },\n  closeAllModals: function() {\n    return {type: ModalActions.CLOSE_ALL};\n  }\n};\n","import '../css/Modal.css';\nimport {MdArrowBack,MdClose} from 'react-icons/md';\nimport {ModalActionCreators} from '../actions/modals';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass Modal extends React.Component {\n  dontClose(e) {\n    e.stopPropagation();\n  }\n\n  closeTop() {\n    this.props.actions.closeTopModal();\n  }\n\n  closeAll() {\n    this.props.actions.closeAllModals();\n  }\n\n  render() {\n    return (\n      <div className={this.props.className !== undefined ? 'Modal ' + this.props.className : 'Modal'} onClick={this.dontClose}>\n        {\n          this.props.hasPrevious\n            ? <MdArrowBack className=\"previousModal\" onClick={this.closeTop.bind(this)} />\n            : null\n        }\n        <MdClose className=\"closeModal\" onClick={this.closeAll.bind(this)} />\n        {this.props.children}\n      </div>\n    );\n  }\n}\nModal.propTypes = {\n  actions: PropTypes.object.isRequired,\n  children: PropTypes.node.isRequired,\n  className: PropTypes.string,\n  hasPrevious: PropTypes.bool.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {hasPrevious: state.modals.length > 1};\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(ModalActionCreators, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import '../css/DeleteTaskModal.css';\nimport {ModalActionCreators} from '../actions/modals';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport I18n from './I18n';\nimport Modal from './Modal';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass DeleteTaskModal extends React.Component {\n  deleteChildren() {\n    this.props.taskActions.deleteTask(this.props.task, true);\n    this.props.modalActions.closeTopModal();\n  }\n\n  reparentChildren() {\n    this.props.taskActions.deleteTask(this.props.task, false);\n    this.props.modalActions.closeTopModal();\n  }\n\n  render() {\n    return (\n      <Modal className='DeleteTaskModal'>\n        <I18n component='p'>DELETE_MODAL</I18n>\n        <I18n component='button' className='reparentChildren' onClick={this.reparentChildren.bind(this)}>MOVE_CHILDREN</I18n>\n        <I18n component='button' className='deleteChildren' onClick={this.deleteChildren.bind(this)}>DELETE_CHILDREN</I18n>\n        <I18n component='p' className='small'>DELETE_MODAL_SHORTCUT_HINT</I18n>\n      </Modal>\n    );\n  }\n}\nDeleteTaskModal.propTypes = {\n  modalActions: PropTypes.object.isRequired,\n  task: PropTypes.object.isRequired,\n  taskActions: PropTypes.object.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    taskActions: bindActionCreators(TaskActionCreators, dispatch),\n    modalActions: bindActionCreators(ModalActionCreators, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(DeleteTaskModal);\n","import '../css/EditTagsModal.css';\nimport {ModalActionCreators} from '../actions/modals';\nimport {TagActionCreators} from '../actions/tags';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport I18n from './I18n';\nimport Modal from './Modal';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass EditTagsModal extends React.Component {\n  render() {\n    return (\n      <Modal className='EditTagsModal'>\n        <I18n component='h3'>EDIT_TAGS</I18n>\n      </Modal>\n    );\n  }\n}\nEditTagsModal.propTypes = {\n  modalActions: PropTypes.object.isRequired,\n  tagActions: PropTypes.object.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    tagActions: bindActionCreators(TagActionCreators, dispatch),\n    modalActions: bindActionCreators(ModalActionCreators, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(EditTagsModal);\n","import '../css/SettingWrapper.css';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nexport default class SettingWrapper extends React.Component {\n  render() {\n    return (\n      <div className={'SettingWrapper ' + this.props.settingType}>\n        <label htmlFor={this.props.setting}>\n          {this.props.label}\n          {\n            this.props.saved\n              ? <I18n className='saved'>SETTING_SAVED</I18n>\n              : null\n          }\n        </label>\n        {this.props.children}\n      </div>\n    );\n  }\n}\nSettingWrapper.propTypes = {\n  children: PropTypes.node.isRequired,\n  label: PropTypes.string.isRequired,\n  saved: PropTypes.bool.isRequired,\n  setting: PropTypes.string.isRequired,\n  settingType: PropTypes.string.isRequired,\n};\n","import {SettingActionCreators} from '../actions/settings';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\n\nfunction mapStateToProps(state, props) {\n  return {\n    value: state.settings[props.setting]\n  };\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  const setSetting = bindActionCreators(SettingActionCreators.setSetting, dispatch);\n  return {\n    saveValue: function (value, markSaved) { setSetting(props.setting, value, markSaved); }\n  };\n}\n\nexport default function connectSetting(component) {\n  return connect(mapStateToProps, mapDispatchToProps)(component);\n}\n","import FormState from './hoc/FormState';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport SettingWrapper from './SettingWrapper';\nimport connectSetting from '../utils/connectSetting';\n\nclass DropdownSetting extends FormState {\n  render() {\n    return (\n      <SettingWrapper settingType='DropdownSetting' setting={this.props.setting} label={this.props.label} saved={this.state.saved}>\n        <select\n          id={this.props.setting}\n          type={this.fieldType}\n          onChange={this.handleChange().bind(this)}\n          onBlur={this.saveChanges.bind(this)}\n          value={this.state.value}\n        >\n          {\n            this.props.options.map(option => (\n              <option key={option.value} value={option.value}>\n                {option.label}\n              </option>\n            ))\n          }\n        </select>\n      </SettingWrapper>\n    );\n  }\n}\nDropdownSetting.propTypes = {\n  label: PropTypes.string.isRequired,\n  options: PropTypes.array.isRequired,\n  setting: PropTypes.string.isRequired,\n};\n\nexport default connectSetting(DropdownSetting);\n","import FormState from './hoc/FormState';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport SettingWrapper from './SettingWrapper';\nimport connectSetting from '../utils/connectSetting';\n\nclass TextSetting extends FormState {\n  constructor(props) {\n    super(props);\n    this.fieldType = props.fieldType || 'text';\n  }\n\n  render() {\n    return (\n      <SettingWrapper settingType='TextSetting' setting={this.props.setting} label={this.props.label} saved={this.state.saved}>\n        <input\n          id={this.props.setting}\n          type={this.fieldType}\n          value={this.state.value}\n          onChange={this.handleChange().bind(this)}\n          onBlur={this.saveChanges.bind(this)}\n        />\n      </SettingWrapper>\n    );\n  }\n}\nTextSetting.propTypes = {\n  fieldType: PropTypes.string,\n  label: PropTypes.string.isRequired,\n  setting: PropTypes.string.isRequired,\n};\n\nexport default connectSetting(TextSetting);\n","import {createConstants} from '../utils';\nimport {languages} from '../i18n';\nimport DropdownSetting from '../components/DropdownSetting';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TextSetting from '../components/TextSetting';\n\nexport const SettingTypes = createConstants('SETTING_TYPE_', [\n  'DROPDOWN',\n  'EMAIL',\n  'TEXT'\n]);\n\nfunction EmailSetting(props) {\n  return <TextSetting {...props} fieldType='email' />;\n}\n\nconst SettingComponents = {\n  [SettingTypes.DROPDOWN]: DropdownSetting,\n  [SettingTypes.EMAIL]: EmailSetting,\n  [SettingTypes.TEXT]: TextSetting,\n};\n\n// This list should be kept in sync with the settings in the backend.\nexport const Settings = [\n  {\n    setting: 'name',\n    label: 'Your name',\n    type: SettingTypes.TEXT,\n  },\n  {\n    setting: 'email',\n    label: 'Your email',\n    type: SettingTypes.EMAIL,\n  },\n  {\n    setting: 'deletion_behaviour',\n    label: 'Behaviour when deleting tasks with children',\n    type: SettingTypes.DROPDOWN,\n    options: [\n      {value: 'ASK', label: 'Ask every time'},\n      {value: 'CASCADE', label: 'Delete children recursively'},\n      {value: 'REPARENT', label: 'Move children to parent task'},\n    ]\n  },\n  {\n    setting: 'language',\n    label: 'Language',\n    type: SettingTypes.DROPDOWN,\n    options: Object.entries(languages).map(([lang, strings]) => ({\n      value: lang,\n      label: strings['_LANGUAGE']\n    }))\n  },\n];\n\nexport function createSetting(props) {\n  return React.createElement(SettingComponents[props.type], Object.assign({}, props, {key: props.setting}));\n}\ncreateSetting.propTypes = {\n  type: PropTypes.string.isRequired,\n  setting: PropTypes.string.isRequired,\n};\n","import {ModalActionCreators} from '../actions/modals';\nimport {Modals} from '../utils/modals';\nimport {Settings, createSetting} from '../utils/settings';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport I18n from './I18n';\nimport Modal from './Modal';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nexport class SettingsModal extends React.Component {\n  edit_tags(e) {\n    e.preventDefault();\n    this.props.modalActions.showModal(Modals.EDIT_TAGS, {});\n  }\n\n  render() {\n    return (\n      <Modal className='SettingsModal'>\n        <I18n component='h3'>SETTINGS</I18n>\n        {Settings.map(createSetting)}\n        <I18n component='button' className='editTags' onClick={this.edit_tags.bind(this)}>EDIT_TAGS</I18n>\n      </Modal>\n    );\n  }\n}\nSettingsModal.propTypes = {\n  modalActions: PropTypes.object.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    modalActions: bindActionCreators(ModalActionCreators, dispatch),\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(SettingsModal);\n","import {createConstants} from '../utils';\nimport DeleteTaskModal from '../components/DeleteTaskModal';\nimport EditTagsModal from '../components/EditTagsModal';\nimport React from 'react';\nimport SettingsModal from '../components/SettingsModal';\n\nexport const Modals = createConstants('MODAL_', [\n  'DELETE_TASK',\n  'EDIT_TAGS',\n  'SETTINGS',\n]);\n\nconst ModalComponents = {\n  [Modals.DELETE_TASK]: DeleteTaskModal,\n  [Modals.EDIT_TAGS]: EditTagsModal,\n  [Modals.SETTINGS]: SettingsModal,\n};\n\nexport function createModal(modal, props) {\n  return React.createElement(ModalComponents[modal], props);\n}\n","import '../css/EditTaskTitle.css';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport FormState from './hoc/FormState';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass EditTaskTitle extends FormState {\n  render() {\n    return (\n      <div className={this.state.saved ? 'EditTaskTitle saved' : 'EditTaskTitle'}>\n        <input\n          type='text'\n          value={this.state.value}\n          onChange={this.handleChange().bind(this)}\n          onBlur={this.saveChanges.bind(this)}\n          autoFocus\n        />\n      </div>\n    );\n  }\n}\nEditTaskTitle.propTypes = {\n  task_id: PropTypes.number.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch, props) {\n  var updateTask = bindActionCreators(TaskActionCreators.updateTask, dispatch);\n  return {\n    saveValue: function(value, markSaved) {\n      updateTask(props.task_id, {title: value}, markSaved);\n    }\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(EditTaskTitle);\n","import '../css/TaskMainInfo.css';\nimport {MdCheckBox,MdCheckBoxOutlineBlank,MdClose,MdDone,MdEdit,MdExpandLess,MdExpandMore,MdLabel,MdList} from 'react-icons/md';\nimport {ModalActionCreators} from '../actions/modals';\nimport {Modals} from '../utils/modals';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {loadSVG, withArgs, withTitle} from '../utils';\nimport {push} from 'react-router-redux';\nimport EditTaskTitle from './EditTaskTitle';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport TaskTagList from './TaskTagList';\nimport dragHandle from '../resources/drag-handle.svg';\nimport rootTree from '../resources/root-tree.svg';\n\nclass TaskMainInfo extends React.Component {\n  deleteTask (e) {\n    if (!this.props.task.has_children || e.ctrlKey || this.props.deletionBehaviour === 'REPARENT') {\n      this.props.taskActions.deleteTask(this.props.task, false);\n    } else if (e.shiftKey || this.props.deletionBehaviour === 'CASCADE') {\n      this.props.taskActions.deleteTask(this.props.task, true);\n    } else {\n      this.props.modalActions.showModal(Modals.DELETE_TASK, {task: this.props.task});\n    }\n  }\n\n  markAsCompleted() {\n    this.props.taskActions.updateTask(this.props.task.object_id, {completed: true});\n  }\n\n  markAsUncompleted() {\n    this.props.taskActions.updateTask(this.props.task.object_id, {completed: false});\n  }\n\n  render() {\n    var classes = ['TaskMainInfo'];\n    if (this.props.task.completed) classes.push('completed');\n\n    var ApplyTag = withTitle(MdLabel);\n    var CollapseDetails = withTitle(MdExpandLess);\n    var DeleteTask = withTitle(MdClose);\n    var Done = withTitle(MdDone);\n    var DragHandle = withTitle(loadSVG(dragHandle));\n    var Edit = withTitle(MdEdit);\n    var ExpandChildren = withTitle(MdList);\n    var ExpandDetails = withTitle(MdExpandMore);\n    var RootHere = withTitle(loadSVG(rootTree));\n    var TaskCompleted = withTitle(MdCheckBox);\n    var TaskUnCompleted = withTitle(MdCheckBoxOutlineBlank);\n\n    var handle = this.props.connectDragSource(\n      <div>\n        <DragHandle className='dragHandle' title='MOVE_TASK' />\n      </div>\n    );\n\n    let titleMarkdownTypes = [\n      'root',\n      'emphasis',\n      'strong',\n      'delete',\n      'link',\n      'inlineCode',\n    ];\n\n    return this.props.connectDragPreview(\n      <div className={classes.join(' ')}>\n        {handle}\n        {\n          this.props.task.completed\n            ? <TaskCompleted onClick={this.markAsUncompleted.bind(this)} className='taskCompleted' title='MARK_UNCOMPLETED' />\n            : <TaskUnCompleted onClick={this.markAsCompleted.bind(this)} className='taskCompleted' title='MARK_COMPLETED' />\n        }\n        {\n          this.props.editMode\n            ? <EditTaskTitle task_id={this.props.task.object_id} value={this.props.task.title} />\n            : <ReactMarkdown className='title' allowedTypes={titleMarkdownTypes} source={this.props.task.title} skipHtml={true} unwrapDisallowed={true} linkTarget='_blank' />\n        }\n        {this.props.editMode || this.props.detailsShown ? null : <TaskTagList task={this.props.task} editMode={false} />}\n        {\n          this.props.detailsShown\n            ? <CollapseDetails className='toggleDetails' onClick={this.props.toggleDetails} title='COLLAPSE_DETAILS' />\n            : <ExpandDetails className='toggleDetails' onClick={this.props.toggleDetails} title='EXPAND_DETAILS' />\n        }\n        {\n          this.props.editMode\n            ? <Done className='toggleEditMode' onClick={this.props.toggleEditMode} title='DONE_EDITING' />\n            : <Edit className='toggleEditMode' onClick={this.props.toggleEditMode} title='EDIT_TASK' />\n        }\n        <ApplyTag className='applyTag' onClick={this.props.toggleTagMenu} title='APPLY_TAG' />\n        <RootHere className='rootTree' onClick={withArgs(this.props.goTo, '/parent/' + this.props.task.object_id)} title='ROOT_HERE' />\n        <ExpandChildren\n          className={this.props.task.has_children ? 'expandChildren hasChildren' : 'expandChildren'}\n          onClick={this.props.toggleExpandChildren}\n          title={this.props.childrenExpanded ? 'COLLAPSE_CHILDREN' : 'EXPAND_CHILDREN'}\n        />\n        <DeleteTask className='deleteTask' onClick={this.deleteTask.bind(this)} title='DELETE_TASK' />\n      </div>\n    );\n  }\n}\nTaskMainInfo.propTypes = {\n  childrenExpanded: PropTypes.bool.isRequired,\n  connectDragSource: PropTypes.func.isRequired,\n  connectDragPreview: PropTypes.func.isRequired,\n  deletionBehaviour: PropTypes.string, // Will be undefined while settings are loaded asynchronously.\n  detailsShown: PropTypes.bool.isRequired,\n  editMode: PropTypes.bool.isRequired,\n  goTo: PropTypes.func.isRequired,\n  modalActions: PropTypes.object.isRequired,\n  task: PropTypes.object.isRequired,\n  taskActions: PropTypes.object.isRequired,\n  toggleDetails: PropTypes.func.isRequired,\n  toggleExpandChildren: PropTypes.func.isRequired,\n  toggleEditMode: PropTypes.func.isRequired,\n  toggleTagMenu: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    deletionBehaviour: state.settings.deletion_behaviour,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    taskActions: bindActionCreators(TaskActionCreators, dispatch),\n    modalActions: bindActionCreators(ModalActionCreators, dispatch),\n    goTo: bindActionCreators(push, dispatch),\n  };\n}\n\nexport default (\n  connect(mapStateToProps, mapDispatchToProps)(TaskMainInfo));\n","import '../css/TagMenuTagList.css';\nimport {TagActionCreators} from '../actions/tags';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass TagMenuTagList extends React.Component {\n  applyTag(tagID) {\n    return function() {\n      this.props.actions.applyTagToTasks(tagID, [this.props.task.object_id], this.props.hideMenu);\n    };\n  }\n\n  render() {\n    var tagToLi = function(tag) {\n      var classes = ['tag'];\n      if (tag.group_id !== null) classes.push('inGroup');\n      return (\n        <li className={classes.join(' ')} key={'tag-'+tag.object_id} onClick={this.applyTag(tag.object_id).bind(this)}>{tag.title}</li>\n      );\n    }.bind(this);\n    var entries = this.props.tags.map(tagToLi).concat(\n      this.props.groups.map(({group, tags}) => {\n        return [\n          <li className='group' key={'group-'+group.object_id}>{group.title}</li>\n        ].concat(tags.map(tagToLi));\n      })\n    );\n    return (\n      <ul className='TagMenuTagList'>\n        {\n          entries.length > 0\n            ? entries\n            : <I18n component='li' className='notFound' key='notFound'>NO_TAGS_FOUND</I18n>\n        }\n      </ul>\n    );\n  }\n}\nTagMenuTagList.propTypes = {\n  searchText: PropTypes.string.isRequired,\n  task: PropTypes.object.isRequired,\n  tags: PropTypes.array.isRequired,\n  groups: PropTypes.array.isRequired,\n  actions: PropTypes.object.isRequired,\n  hideMenu: PropTypes.func.isRequired,\n};\n\nfunction mapStateToProps(state, props) {\n  const matchesSearch = function(text) {\n    return text.toLowerCase().includes(props.searchText.toLowerCase());\n  };\n\n  return {\n    groups: Object.values(state.tag_groups).filter(\n      (group) => matchesSearch(group.title)\n    ).map((group) => {\n      var tags = [];\n      // Find the first tag\n      var tag = Object.values(state.tags).find((tag) => tag.group_id === group.object_id && tag.before_id === null);\n      // Append tags to the list by following the links.\n      while (tag !== undefined) {\n        if (!props.task.tag_ids.includes(tag.object_id)) {\n          tags.push(tag);\n        }\n        tag = state.tags[tag.after_id];\n      }\n\n      return {group, tags};\n    }),\n    tags: Object.values(state.tags).filter(\n      (tag) => (\n        matchesSearch(tag.title) &&\n        !props.task.tag_ids.includes(tag.object_id) &&\n        (props.searchText !== '' || tag.group_id === null)\n      )\n    ),\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(TagActionCreators, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TagMenuTagList);\n","import '../css/TaskTagMenu.css';\nimport {handleChange} from '../utils';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TagMenuTagList from './TagMenuTagList';\n\nexport default class TaskTagMenu extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      searchText: '',\n    };\n  }\n\n  clearForm() {\n    this.setState({searchText: ''});\n  }\n\n  componentDidMount() {\n    this.searchInput.focus();\n  }\n\n  render() {\n    return (\n      <div className='TaskTagMenu'>\n        <div className='rightShift'>\n          <I18n\n            component='input'\n            type='text'\n            placeholder='SEARCH_TAGS'\n            value={this.state.searchText}\n            childRef={(input) => { this.searchInput = input; }}\n            onChange={handleChange('searchText').bind(this)} />\n          <TagMenuTagList task={this.props.task} searchText={this.state.searchText} hideMenu={this.props.hideMenu} />\n        </div>\n      </div>\n    );\n  }\n}\nTaskTagMenu.propTypes = {\n  task: PropTypes.object.isRequired,\n  hideMenu: PropTypes.func.isRequired,\n};\n","import '../css/Task.css';\nimport {DragSource, DropTarget} from 'react-dnd';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {forceState, toggleState} from '../utils';\nimport Config from '../Config';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TaskDetails from './TaskDetails';\nimport TaskList from './TaskList';\nimport TaskMainInfo from './TaskMainInfo';\nimport TaskTagMenu from './TaskTagMenu';\n\nclass Task extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expandChildren: false,\n      expandChildrenForDragging: false,\n      dragTimeout: null,\n      editMode: false,\n      showDetails: false,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.isOver !== this.props.isOver) {\n      if (this.state.dragTimeout !== null) {\n        clearTimeout(this.state.dragTimeout);\n      }\n      this.setState({\n        dragTimeout: setTimeout(function() {\n          this.setState({\n            expandChildrenForDragging: this.props.isOver,\n            dragTimeout: null,\n          });\n        }.bind(this), Config.dragExpandChildrenTimeout),\n      });\n    }\n  }\n\n  render() {\n    var classes = ['Task'];\n    if (this.props.isOverSelfOnly && this.props.canDrop) classes.push('dropHere');\n    if (this.props.isDragging) classes.push('isDragging');\n    if (this.state.expandChildren) classes.push('expandChildren');\n    if (this.state.editMode) classes.push('editMode');\n\n    var mainInfoProps = {\n      childrenExpanded: this.state.expandChildren,\n      editMode: this.state.editMode,\n      detailsShown: this.state.showDetails,\n      showTagMenu: this.state.showTagMenu,\n      task: this.props.task,\n      toggleExpandChildren: toggleState('expandChildren').bind(this),\n      toggleEditMode: toggleState('editMode').bind(this),\n      toggleDetails: toggleState('showDetails').bind(this),\n      toggleTagMenu: toggleState('showTagMenu').bind(this),\n      connectDragSource: this.props.connectDragSource,\n      connectDragPreview: this.props.connectDragPreview,\n    };\n\n    var taskDetailsProps = {\n      editMode: this.state.editMode,\n      task: this.props.task,\n    };\n\n    return this.props.connectDropTarget(\n      <div className={classes.join(' ')}>\n        <div className='taskInfo'>\n          <TaskMainInfo {...mainInfoProps} />\n          {\n            (this.state.showDetails || this.state.editMode) && !this.props.isDragging\n              ? <TaskDetails {...taskDetailsProps} />\n              : null\n          }\n        </div>\n        {\n          this.state.showTagMenu\n            ? <TaskTagMenu task={this.props.task} hideMenu={forceState('showTagMenu', false).bind(this)} />\n            : null\n        }\n        {\n          (this.state.expandChildren || this.state.expandChildrenForDragging) && !this.props.isDragging\n            ? <TaskList parentID={this.props.task.object_id} alternateDepth={this.props.alternateDepth} />\n            : null\n        }\n      </div>\n    );\n  }\n}\nTask.propTypes = {\n  actions: PropTypes.object.isRequired,\n  alternateDepth: PropTypes.bool.isRequired,\n  canDrop: PropTypes.bool.isRequired,\n  connectDragSource: PropTypes.func.isRequired,\n  connectDragPreview: PropTypes.func.isRequired,\n  connectDropTarget: PropTypes.func.isRequired,\n  isDragging: PropTypes.bool.isRequired,\n  isOver: PropTypes.bool.isRequired,\n  isOverSelfOnly: PropTypes.bool.isRequired,\n  task: PropTypes.object.isRequired,\n};\n\nconst dragSource = {\n  beginDrag(props) {\n    return {\n      task_id: props.task.object_id,\n    };\n  }\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(TaskActionCreators, dispatch)\n  };\n}\n\nfunction dragCollect(connect, monitor) {\n  return {\n    connectDragSource: connect.dragSource(),\n    connectDragPreview: connect.dragPreview(),\n    isDragging: monitor.isDragging(),\n  };\n}\n\nconst dropTarget = {\n  canDrop(props, monitor) {\n    var task_id = monitor.getItem().task_id;\n\n    return (task_id !== props.task.object_id && task_id !== props.task.before_id);\n  },\n\n  drop(props, monitor) {\n    if (monitor.didDrop()) return;\n\n    props.actions.reorderTask(\n      monitor.getItem().task_id,\n      props.task.object_id);\n  },\n};\n\nfunction dropCollect(connect, monitor) {\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    isOverSelfOnly: monitor.isOver({shallow: true}),\n    canDrop: monitor.canDrop(),\n  };\n}\n\nexport default (\n  connect(null, mapDispatchToProps)(\n    DragSource('TASK', dragSource, dragCollect)(\n      DropTarget('TASK', dropTarget, dropCollect)(\n        Task))));\n","import '../css/TaskList.css';\nimport {TaskActionCreators} from '../actions/tasks';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport I18n from './I18n';\nimport NewTaskForm from './NewTaskForm';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Task from './Task';\n\nclass TaskList extends React.Component {\n  componentDidMount() {\n    if (!this.props.childrenLoaded) {\n      this.props.actions.getTasks(this.props.parentID);\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.parentID !== this.props.parentID && !this.props.childrenLoaded) {\n      this.props.actions.getTasks(this.props.parentID);\n    }\n  }\n\n  render() {\n    var tasks;\n    if (this.props.childrenLoaded) {\n      if (this.props.tasks.length > 0) {\n        tasks = this.props.tasks.map(\n          task => <Task task={task} key={task.object_id} alternateDepth={!this.props.alternateDepth} />);\n      } else {\n        tasks = <I18n component='div' className='noTasks'>NO_TASKS_YET</I18n>;\n      }\n    } else {\n      tasks = <I18n component='div' className='tasksLoading'>LOADING</I18n>;\n    }\n\n    var lastTaskID = (\n      this.props.tasks.length >0\n        ? this.props.tasks[this.props.tasks.length - 1].object_id\n        : null);\n\n    return (\n      <div className={this.props.alternateDepth ? 'TaskList alternateDepth' : 'TaskList'}>\n        <div className='tasks'>\n          {tasks}\n        </div>\n        <NewTaskForm parentID={this.props.parentID} lastTaskID={lastTaskID} />\n      </div>\n    );\n  }\n}\nTaskList.propTypes = {\n  // parentID can be null, so can't set isRequired\n  parentID: PropTypes.number,\n  alternateDepth: PropTypes.bool.isRequired,\n  tasks: PropTypes.array.isRequired,\n  childrenLoaded: PropTypes.bool.isRequired,\n  actions: PropTypes.object.isRequired\n};\n\nfunction mapStateToProps(state, props) {\n  var orderedTasks = [];\n  // Find the first child\n  var child = Object.values(state.tasks).find((task) => {\n    return task.parent_id === props.parentID && task.before_id === null;\n  });\n  // Append children to the list by following the links.\n  while (child !== undefined) {\n    orderedTasks.push(child);\n    child = state.tasks[child.after_id];\n  }\n\n  return {\n    tasks: orderedTasks,\n    childrenLoaded: state.childrenLoaded[props.parentID] !== undefined\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(TaskActionCreators, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TaskList);\n","import {DragDropContext} from 'react-dnd';\nimport {SettingActionCreators} from '../actions/settings';\nimport {TagActionCreators} from '../actions/tags';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TaskHeader from './TaskHeader';\nimport TaskList from './TaskList';\n\nclass App extends React.Component {\n  parentID() {\n    return parseInt(this.props.match.params.parentID, 10) || null;\n  }\n\n  componentDidMount() {\n    this.props.settingActions.getSettings();\n    this.props.tagActions.getTagsAndGroups();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        {this.parentID() !== null ? <TaskHeader taskID={this.parentID()} /> : null}\n        <TaskList parentID={this.parentID()} alternateDepth={true} />\n      </div>\n    );\n  }\n}\nApp.propTypes = {\n  match: PropTypes.object.isRequired,\n  settingActions: PropTypes.object.isRequired,\n  tagActions: PropTypes.object.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    settingActions: bindActionCreators(SettingActionCreators, dispatch),\n    tagActions: bindActionCreators(TagActionCreators, dispatch),\n  };\n}\n\nexport default (\n  connect(null, mapDispatchToProps)(\n    DragDropContext(HTML5Backend)(\n      App)));\n","import {AuthActionCreators} from '../actions/auth';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {handleChange} from '../utils';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: ''\n    };\n  }\n\n  login(e) {\n    e.preventDefault();\n    this.props.actions.login(\n      this.state.email, this.state.password, this.props.next);\n  }\n\n  render() {\n    return (\n      <div className='LoginForm'>\n        <I18n component='h3'>LOG_IN_HEADER</I18n>\n        <form>\n          <I18n component='input' type='email' placeholder='EMAIL' value={this.state.email} onChange={handleChange('email').bind(this)} />\n          <I18n component='input' type='password' placeholder='PASSWORD' value={this.state.password} onChange={handleChange('password').bind(this)} />\n          <I18n component='button' type='submit' disabled={this.props.isAuthenticating} onClick={this.login.bind(this)}>LOG_IN_BUTTON</I18n>\n        </form>\n      </div>\n    );\n  }\n}\nLoginForm.propTypes = {\n  actions: PropTypes.object.isRequired,\n  isAuthenticating: PropTypes.bool.isRequired,\n  next: PropTypes.string.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    isAuthenticating: state.auth.isAuthenticating,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(AuthActionCreators, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginForm);\n","import {AuthActionCreators} from '../actions/auth';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {handleChange} from '../utils';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass RegisterForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      email: '',\n      password: '',\n      name: ''\n    };\n  }\n\n  register(e) {\n    e.preventDefault();\n    this.props.actions.register(\n      this.state.email, this.state.password, this.state.name, this.props.next);\n  }\n\n  render() {\n    return (\n      <div className='RegisterForm'>\n        <I18n component='h3'>REGISTER_HEADER</I18n>\n        <form>\n          <I18n component='input' type='email' placeholder='EMAIL' value={this.state.email} onChange={handleChange('email').bind(this)} />\n          <I18n component='input' type='password' placeholder='PASSWORD' value={this.state.password} onChange={handleChange('password').bind(this)} />\n          <I18n component='input' type='text' placeholder='NAME' value={this.state.name} onChange={handleChange('name').bind(this)} />\n          <I18n component='button' type='submit' disabled={this.props.isAuthenticating} onClick={this.register.bind(this)}>REGISTER_BUTTON</I18n>\n        </form>\n      </div>\n    );\n  }\n}\nRegisterForm.propTypes = {\n  actions: PropTypes.object.isRequired,\n  isAuthenticating: PropTypes.bool.isRequired,\n  next: PropTypes.string.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    isAuthenticating: state.auth.isAuthenticating,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(AuthActionCreators, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterForm);\n","import LoginForm from './LoginForm';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport RegisterForm from './RegisterForm';\nimport queryString from 'query-string';\n\nexport default class HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.next = queryString.parse(this.props.location.search).next || '/';\n  }\n\n  render() {\n    return (\n      <div className='HomePage'>\n        <LoginForm next={this.next} />\n        <RegisterForm next={this.next} />\n      </div>\n    );\n  }\n}\nHomePage.propTypes = {\n  location: PropTypes.shape({\n    search: PropTypes.string.isRequired\n  }).isRequired\n};\n","import '../css/UserHeader.css';\nimport {AuthActionCreators} from '../actions/auth';\nimport {MdSettings} from 'react-icons/md';\nimport {ModalActionCreators} from '../actions/modals';\nimport {Modals} from '../utils/modals';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass UserHeader extends React.Component {\n  logout(e) {\n    e.preventDefault();\n    this.props.authActions.logout();\n  }\n\n  settings(e) {\n    e.preventDefault();\n    this.props.modalActions.showModal(Modals.SETTINGS, {});\n  }\n\n  render() {\n    if (!this.props.isAuthenticated) return null;\n\n    return (\n      <div className='UserHeader'>\n        <button className='logoutButton' onClick={this.logout.bind(this)}>Log out</button>\n        <div className='settings' onClick={this.settings.bind(this)}>\n          <MdSettings />\n        </div>\n        {\n          this.props.name\n            ? <I18n component='p' contentI18nArgs={{name: this.props.name}}>HELLO_USER</I18n>\n            : null\n        }\n      </div>\n    );\n  }\n}\nUserHeader.propTypes = {\n  authActions: PropTypes.object.isRequired,\n  isAuthenticated: PropTypes.bool.isRequired,\n  modalActions: PropTypes.object.isRequired,\n  name: PropTypes.string,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    isAuthenticated: state.auth.backend.isAuthenticated(),\n    name: state.settings.name,\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    authActions: bindActionCreators(AuthActionCreators, dispatch),\n    modalActions: bindActionCreators(ModalActionCreators, dispatch),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserHeader);\n","import '../css/Header.css';\nimport {Link} from 'react-router-dom';\nimport I18n from './I18n';\nimport React from 'react';\nimport UserHeader from './UserHeader';\nimport logo from '../resources/logo.svg';\n\nexport default class Header extends React.Component {\n  render() {\n    return (\n      <header className='Header'>\n        <Link to='/'>\n          <img src={logo} className='Header-logo' alt='logo' />\n        </Link>\n        <h2><I18n component={Link} to='/'>LIME</I18n></h2>\n        <UserHeader />\n      </header>\n    );\n  }\n}\n","import '../css/Message.css';\nimport {MdDone,MdError,MdInfo,MdWarning} from 'react-icons/md';\nimport {MessageActionCreators} from '../actions/messages';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport Config from '../Config';\nimport I18n from './I18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nconst icons = {\n  'error': <MdError className='messageIcon' />,\n  'warning': <MdWarning className='messageIcon' />,\n  'info': <MdInfo className='messageIcon' />,\n  'success': <MdDone className='messageIcon' />,\n};\n\nclass Message extends React.Component {\n  componentDidMount() {\n    setTimeout(\n      () => this.props.actions.clearMessage(this.props.id),\n      Config.messageTimeout);\n  }\n\n  disappear(e) {\n    e.preventDefault();\n    this.props.actions.clearMessage(this.props.id);\n  }\n\n  render() {\n    return (\n      <I18n component='div' className={'Message ' + this.props.level} onClick={this.disappear.bind(this)} title='CLICK_TO_DISMISS'>\n        {icons[this.props.level]}\n        <I18n>{this.props.message}</I18n>\n      </I18n>\n    );\n  }\n}\nMessage.propTypes = {\n  actions: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  level: PropTypes.string.isRequired,\n  message: PropTypes.string.isRequired,\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(MessageActionCreators, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(Message);\n","import '../css/Messages.css';\nimport {connect} from 'react-redux';\nimport CSSTransition from 'react-transition-group/CSSTransition';\nimport Message from './Message';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\n\nclass Messages extends React.Component {\n  render() {\n    return (\n      <div className='Messages'>\n        <TransitionGroup>\n          {this.props.messages.map(message => (\n            <CSSTransition key={message.id} classNames='message' timeout={250}>\n              <Message {...message} />\n            </CSSTransition>\n          ))}\n        </TransitionGroup>\n      </div>\n    );\n  }\n}\nMessages.propTypes = {messages: PropTypes.array.isRequired};\n\nfunction mapStateToProps(state) {\n  return {\n    messages: state.messages\n  };\n}\n\nexport default connect(mapStateToProps)(Messages);\n","import '../css/ModalContainer.css';\nimport {ModalActionCreators} from '../actions/modals';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport CSSTransition from 'react-transition-group/CSSTransition';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport TransitionGroup from 'react-transition-group/TransitionGroup';\n\nclass ModalContainer extends React.Component {\n  render() {\n    return (\n      <div className='ModalContainer'>\n        <TransitionGroup>\n          {\n            /* eslint-disable indent */\n            this.props.modal !== null\n              ? <CSSTransition classNames='modal' timeout={250} in={this.props.modal !== null}>\n                  <div className='modalOverlay' onClick={this.props.actions.closeAllModals}>\n                    {this.props.modal}\n                  </div>\n                </CSSTransition>\n              : null\n            /* eslint-enable indent */\n          }\n        </TransitionGroup>\n      </div>\n    );\n  }\n}\nModalContainer.propTypes = {\n  actions: PropTypes.object.isRequired,\n  modal: PropTypes.element,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    modal: state.modals.length > 0 ? state.modals.slice(-1)[0] : null\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    actions: bindActionCreators(ModalActionCreators, dispatch)\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModalContainer);\n","import '../css/Layout.css';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router-dom';\nimport Header from './Header';\nimport Messages from './Messages';\nimport ModalContainer from './ModalContainer';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nclass Layout extends React.Component {\n  render() {\n    return (\n      <div className={this.props.modalOpen ? 'Layout modalOpen' : 'Layout'}>\n        <ModalContainer />\n        <div className=\"content\">\n          <Header />\n          <Messages />\n          <div className='container'>\n            {this.props.children}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n  modalOpen: PropTypes.bool.isRequired,\n};\n\nfunction mapStateToProps(state) {\n  return {\n    modalOpen: state.modals.length > 0\n  };\n}\n\nexport default withRouter(connect(mapStateToProps)(Layout));\n","// Helpers for talking to the backend.\nimport Config from '../Config';\n\nexport default class Backend {\n  constructor (token) {\n    this.token = token;\n  }\n\n  isAuthenticated() {\n    return this.token !== null;\n  }\n\n  request (endpoint, data, onSuccess, onError) {\n    if (!this.isAuthenticated()) {\n      var err = new Error('Unauthorized');\n      err.statusCode = 401;\n      err.response = {};\n      onError(err);\n      return;\n    }\n    data = Object.assign({}, data, {'token': this.token});\n    return this.requestNoAuth(endpoint, data, onSuccess, onError);\n  }\n\n  requestNoAuth (endpoint, data, onSuccess, onError) {\n    return fetch(Config.apiHost + endpoint, {\n      method: 'post',\n      mode: 'cors',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(response => {\n      if (response.status >= 200 && response.status < 300) {\n        return response.json();\n      } else {\n        var err = new Error('Failed request');\n        err.response = response;\n        throw err;\n      }\n    }).then(onSuccess, e => {\n      if (e instanceof TypeError) {\n        // Network error\n        var err = new Error('Network failure');\n        err.statusCode = null;\n        err.response = {error: 'Could not connect to backend: ' + e.message};\n        onError(err);\n      } else {\n        e.response.json().then(function(json) {\n          var err = new Error(e.response.statusText);\n          err.statusCode = e.response.status;\n          err.response = json;\n          onError(err);\n        });\n      }\n    });\n  }\n}\n\n","import {AuthActions} from '../actions/auth';\nimport {createReducer} from '../utils';\nimport Backend from '../utils/Backend';\n\nconst unauthenticatedBackend = new Backend(null);\n\nconst initialState = {\n  backend: unauthenticatedBackend,\n  isAuthenticating: false\n};\n\nexport default createReducer(initialState, true, {\n  [AuthActions.LOGIN_REQUEST]: (state) => {\n    return Object.assign({}, state, {\n      'isAuthenticating': true\n    });\n  },\n  [AuthActions.LOGIN_SUCCESS]: (state, payload) => {\n    return Object.assign({}, state, {\n      'isAuthenticating': false,\n      'backend': new Backend(payload.token)\n    });\n  },\n  [AuthActions.REGISTER_REQUEST]: (state) => {\n    return Object.assign({}, state, {\n      'isAuthenticating': true\n    });\n  },\n  [AuthActions.REGISTER_SUCCESS]: (state, payload) => {\n    return Object.assign({}, state, {\n      'isAuthenticating': false,\n      'backend': new Backend(payload.token)\n    });\n  },\n  [AuthActions.FAILURE]: (state) => {\n    return Object.assign({}, state, {\n      'isAuthenticating': false\n    });\n  },\n});\n","import {ChildrenLoadedActions} from '../actions/childrenLoaded';\nimport {createReducer, filterObject} from '../utils';\n\nconst initialState = {};\n\nexport default createReducer(initialState, true, {\n  [ChildrenLoadedActions.LOADED]: (state, payload) => {\n    return Object.assign({}, state, {[payload.parent_id]: true});\n  },\n  [ChildrenLoadedActions.DELETE]: (state, payload) => {\n    return filterObject(state, ...payload.parent_ids);\n  },\n});\n","import {DbObjectActions} from '../actions/dbobjects';\nimport {createReducer, filterObject, objectArrayToObject} from '../utils';\n\nconst initialState = {};\n\nexport default function dbObjectReducer(identifier) {\n  return createReducer(initialState, true, {\n    [DbObjectActions.DELETE]: (state, payload) => {\n      if (payload.identifier !== identifier) return state;\n\n      return filterObject(state, ...payload.object_ids);\n    },\n    [DbObjectActions.FILTER]: (state, payload) => {\n      if (payload.identifier !== identifier) return state;\n\n      return Object.assign(\n        {}, objectArrayToObject(Object.values(state).filter(payload.func)));\n    },\n    [DbObjectActions.LOAD]: (state, payload) => {\n      var objects = payload.objects.filter(\n        (object) => object.__identifier === identifier);\n      if (objects.length === 0) return state;\n\n      return Object.assign({}, state, objectArrayToObject(objects));\n    },\n    [DbObjectActions.MAP]: (state, payload) => {\n      if (payload.identifier !== identifier) return state;\n\n      return Object.assign(\n        {}, objectArrayToObject(Object.values(state).map(payload.func)));\n    },\n  });\n}\n","import {MessageActions} from '../actions/messages';\nimport {createReducer,createUuid4} from '../utils';\n\nconst initialState = [];\n\nexport default createReducer(initialState, false, {\n  [MessageActions.ADD_MESSAGE]: (state, payload) => {\n    return state.concat([{\n      id: createUuid4(),\n      level: payload.level,\n      message: payload.message\n    }]);\n  },\n  [MessageActions.CLEAR_MESSAGE]: (state, payload) => {\n    return state.filter(message => message.id !== payload.id);\n  },\n  [MessageActions.LOGOUT]: () => {\n    return initialState;\n  }\n});\n","import {ModalActions} from '../actions/modals';\nimport {createModal} from '../utils/modals';\nimport {createReducer} from '../utils';\n\nconst initialState = [];\n\nexport default createReducer(initialState, true, {\n  [ModalActions.SHOW_MODAL]: (state, payload) => {\n    return state.concat([createModal(payload.modal, payload.props)]);\n  },\n  [ModalActions.CLOSE_ALL]: () => {\n    return initialState;\n  },\n  [ModalActions.CLOSE_TOP]: (state) => {\n    return state.slice(0, -1);\n  }\n});\n","import {SettingActions} from '../actions/settings';\nimport {createReducer} from '../utils';\n\nconst initialState = {};\n\nexport default createReducer(initialState, true, {\n  [SettingActions.GOT_SETTINGS]: (state, payload) => {\n    return payload.settings;\n  },\n  [SettingActions.SET_SETTING]: (state, payload) => {\n    return Object.assign({}, state, {[payload.key]: payload.value});\n  },\n});\n","import {combineReducers} from 'redux';\nimport {routerReducer} from 'react-router-redux';\nimport auth from './auth';\nimport childrenLoaded from './childrenLoaded';\nimport dbObjectReducer from './dbobjects';\nimport messages from './messages';\nimport modals from './modals';\nimport settings from './settings';\n\nexport default combineReducers({\n  auth,\n  childrenLoaded,\n  messages,\n  modals,\n  routing: routerReducer,\n  settings,\n  tasks: dbObjectReducer('Task'),\n  tags: dbObjectReducer('Tag'),\n  tag_groups: dbObjectReducer('TagGroup'),\n});\n","import {connect} from 'react-redux';\nimport {push} from 'react-router-redux';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nexport default function requireAuth(Component) {\n  class AuthenticatedComponent extends React.Component {\n    componentDidMount() {\n      this.checkAuth(this.props.isAuthenticated);\n    }\n\n    componentDidUpdate() {\n      this.checkAuth(this.props.isAuthenticated);\n    }\n\n    checkAuth(isAuthenticated) {\n      if (!isAuthenticated) {\n        let redirectAfterLogin = this.props.location.pathname;\n        this.props.dispatch(push(`/home?next=${redirectAfterLogin}`));\n      }\n    }\n\n    render() {\n      if (this.props.isAuthenticated === true)\n        return <Component {...this.props}/>;\n      return null;\n    }\n  }\n  AuthenticatedComponent.propTypes = {\n    location: PropTypes.shape({\n      pathname: PropTypes.string.isRequired\n    }).isRequired,\n    dispatch: PropTypes.func.isRequired,\n    isAuthenticated: PropTypes.bool.isRequired\n  };\n\n  function mapState(state) {\n    return {\n      isAuthenticated: state.auth.backend.isAuthenticated()\n    };\n  }\n\n  return connect(mapState)(AuthenticatedComponent);\n}\n","import {AuthActionCreators} from '../actions/auth';\nimport {ConnectedRouter, routerMiddleware} from 'react-router-redux';\nimport {MessageActionCreators} from '../actions/messages';\nimport {Provider} from 'react-redux';\nimport {Route} from 'react-router-dom';\nimport {applyMiddleware, createStore} from 'redux';\nimport {composeWithDevTools} from 'redux-devtools-extension';\nimport App from './App';\nimport HomePage from './HomePage';\nimport Layout from './Layout';\nimport React from 'react';\nimport createHistory from 'history/createBrowserHistory';\nimport jwt from 'jsonwebtoken';\nimport reducers from '../reducers';\nimport requireAuth from '../utils/requireAuth';\nimport thunk from 'redux-thunk';\n\nexport default class Root extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.history = createHistory();\n    this.store = createStore(\n      reducers,\n      composeWithDevTools(applyMiddleware(thunk, routerMiddleware(this.history)))\n    );\n\n    let token = localStorage.getItem('token');\n    if (token !== null) {\n      let parsed = JSON.parse(token);\n      let decoded = jwt.decode(parsed.key, {complete: true});\n\n      if (decoded.payload.exp > Date.now()/1000) {\n        try {\n          this.store.dispatch(AuthActionCreators.loginSuccess(parsed));\n        } catch (e) {\n          localStorage.clear('token');\n        }\n      } else {\n        localStorage.clear('token');\n\n        this.store.dispatch(\n          MessageActionCreators.addMessage('info', 'MESSAGE_TOKEN_EXPIRED'));\n      }\n    }\n  }\n\n  render() {\n    return (\n      <Provider store={this.store}>\n        <ConnectedRouter history={this.history}>\n          <Layout>\n            <Route exact path='/' component={requireAuth(App)}/>\n            <Route exact path='/parent/:parentID' component={requireAuth(App)}/>\n            <Route exact path='/home' component={HomePage}/>\n          </Layout>\n        </ConnectedRouter>\n      </Provider>\n    );\n  }\n}\n","import './css/global.css';\nimport 'normalize.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Root from './components/Root';\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}